---
import { formatDistance, format } from 'date-fns';
import { marked } from 'marked';
import Grid from './Grid.astro';

export interface Props {
  post: object
}

const { post } = Astro.props;
const { attributes: { title, summary, body, date } } = post || {};
const content = marked.parse(body);
const paragraphs = marked.lexer(body).filter(t => t.type === 'paragraph');
const spans = ['leftside', 'leftmiddle', 'rightmiddle', 'rightside']
//console.log(paragraphs)
const randomSpan = () => {
  return spans[Math.floor(Math.random() * spans.length)]
}
---
<div>
    <Grid class="layout-2-1-1-2">
          <p class="column-1"></p>
          <p class="column-2"></p>
          <p class="column-3"></p>
          <p class="column-4"></p>

    <div className="my-4 text-center">
        <h1 className="text-center text-4xl leading-tight text-gray-900 my-4 font-bold">{title}</h1>
        <div className="text-gray-500 flex justify-center items-center space-x-2">
            <span>&middot;</span>
            <span>{format(new Date(date), 'MM/dd/yyyy')}</span>
            <span>&middot;</span>
            <span>{/*readingTime*/}</span>
        </div>
    </div>
    <div className="rounded-md h-56 w-full overflow-hidden">
        <img
            className="object-cover w-full h-full"
            src={
                // featuredImage
                //    ? `http://localhost:1337${featuredImage.url}`
                //    : 'https://via.placeholder.com/1080'
                'https://via.placeholder.com/180'
            }
        />
    </div>
    {paragraphs && paragraphs.length > 0 ? paragraphs.map((paragraph) => <div set:html={marked.parse(paragraph.text)} class={randomSpan()}></div>) : 'No posts found'}
  </Grid>
</div>

<style>

.leftside {
  grid-column: 1;
}

.leftmiddle {
  grid-column: 1 / 3;
}

.rightmiddle {
  grid-column: 2 / 4;
}
.rightside {
  grid-column: 4;
}

.layout-2-1-1-2 .column-1 {
  background-color: #ddd;
  grid-column: 1;
}

.layout-2-1-1-2 .column-2 {
  background-color: #ddd;
    grid-column: 2;
}

.layout-2-1-1-2 .column-3 {
  background-color: #ddd;
    grid-column: 3;
}

.layout-2-1-1-2 .column-4 {
  background-color: #ddd;
    grid-column: 4;
}
